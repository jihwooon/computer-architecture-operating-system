# 04-1 ALU와 제어장치

## ALU
ALU(`산술논리장치`)는 레지스터를 통해 피연산자를 받아들이고, 제어장치로부터 수행할 연산을 알려주는 제어신호입니다.

ALU가 내보내는 정보를 알아봅시다.

CPU가 메모리에 접근하는 속도는 레지스터에 접근하는 속도보다 훨씬 느립니다. ALU가 연산할 때마다 결과를 메모리에 저장한다면 CPU는 메모리에 자주 접근하게 되고, CPU가 프로그램 실행 속도를 늦춥니다. 그래서 ALU의 결과값을 메모리가 아닌 레지스터에 우선 저장합니다.

ALU는 계산 결과와 플래그를 내보냅니다.

연산 결과에 대한 추가적인 상태 정보를 플래그라고 합니다.

|플래그 종류|의미|사용 예시|
|------|---|---|
|부호 플래그|연산한 결과의 부호를 나타낸다.|부호 플래그가 1일 경우 계산 결과는 음수, 0일 경우 계산 결과는 양수를 의미한다.|
|제로 플래그|연산 결과가 0인지 여부를 나타낸다.|제로 플래그가 1일 경우 연산 결과는 0, 0일 경우 연산결과는 0이 아님을 의미한다.|
|캐리 플래그|연산 결과 올림수나 빌림수가 발생했는지를 나타낸다.|캐리 플래그가 1일 경우 올림수나 빌림수가 발생했음을 의미하고, 0일 경우 발생하지 않았음을 의미한다.|
|오버플로우 플래그|오버플로우가 발생했는지를 나타낸다.|오버 플래그가 1일 경우 오버플로우가 발생했음을 의미하고 0일 경우 발생하지 않았음을 의미한다.|
|인터럽트 플래그|인터럽트가 가능한지를 나타낸다.|인터럽트 플래그가 1일 경우 인터럽트가 가능함을 의미하고, 0일 경우 인터럽트가 불가능함을 의미한다.|
|슈퍼바이저 플래그|커널 모드로 실행 중인지, 사용자가 모드로 실행중인지를 나타낸다.|슈퍼바이저 플래그가 1일 경우 커널 모드로 실행 중밍을 의미하고, 0일 경우 사용자 모드로 실행 중임을 의미한다.|



CPU가 프로그램을 실행하는 도중 반드시 기억해야 하는 일종의 참고 정보입니다.
플래그들은 **플래그 레지스터**라는 레지스터에 저장합니다.


## 제어장치

제어장치는 제어 신호를 내보내고, 명령어를 해석하는 부품입니다. 제어 신호는 컴퓨터 부품들을 관리하고 작동시키기 위한 전기 신호입니다.

제어 장치에는 무엇을 받아들이는가요?

1. 제어장치는 클럭 신호를 받아들입니다.
클럭이라 컴퓨터의 모든 부품을 일사불란하게 움직일 수 있게 하는 시간 단위입니다.
2. 제어 장치는 해석해야 할 명령어를 받아들입니다.
3. 제어장치는 플래그 레지스터 속 플래그 값을 받아들입니다.
4. 제어장치는 시스템 버스, 그중에서 제어 버스로 전달된 제어 신호를 받아들입니다.

제어장치가 메모리에 저장된 값을 읽거나 메모리에 새로운 값을 쓰고 싶다면 메모리로 제어 신호를 내보냅니다. 제어장치가 입출력장치의 값을 읽거나 입출력장치에 새로운 값을 쓰고 싶을 때 입출력장치로 제어 신호를 내보냅니다.

# 04-2 레지스터

프로그램 속 명령어와 데이터는 레지스터에 저장됩니다. 레지스터에 저장도니 값만 잘 관찰해도 프로그램의 실행 흐름을 알 수 있습니다.

1. 프로그램 카운터
메모리에서 가져올 명령어의 주소, 즉 메모리에서 읽어 들일 명령어의 주소를 저장한다.
2. 메모리 주소 레지스터
방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터입니다.

3. 범용 레지스터
범용 레지스터는 이름 그대로 다양하고 일반적인 사항에서 자유롭게 사용할 수 있는 레지스터입니다.

4. 스택 포인터
스택의 꼭대기를 가리키는 레지스터입니다.

5. 베이스 레지스터
오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식입니다.

# 04-3 명령어 사이클과 인터럽트

CPU가 하나의 명령어를 처리하는 과정에서 CPU는 그 흐름을 반복하며 명령어들을 처리해 나갑니다. 정형화된 흐름을 명령어 사이클이라고 합니다.

CPU는 정해진 흐름에 따라 명령어를 처리해 나가지만, 간혹 이 흐름이 끊어지는 상황이 발생합니다. 이를 인터럽트라고 합니다.

### 명령어 사이클
CPU는 이 명령어들을 하나씩 실행합니다. 이 프로그램 속 각각의 명령어들은 일정한 주기가 반복되며 실행되는데 이 주기를 **명령어 사이클**이라고 합니다.

메모리에 있는 명령어를 CPU로 가지고 오는 단계를 인출 사이클이라고 합니다.

CPU로 가져오는 명령어를 실행하는 단계를 **실행 사이클**이라고 합니다.

명령어를 실행하기 위해서는 메모리 접근을 한 번 더 해야 합니다. 이 단계를 **간접 사이클**이라고 합니다.

### 인터럽트

CPU가 수행 중인 작업은 방해를 받아 잠시 중단될 수 있는데, CPU의 작업을 방해하는 신호를 **인터럽트**라고 합니다.

인터럽트에는 두 종류가 있습니다. 

**동기 인터럽트**
CPU에 의해 발생하는 인터럽트입니다.


**비동기 인터럽트**
입출력장치에 의해 발생하는 인터럽트입니다. 비동기 인터럽트를 다른 말로 **하드웨어 인터럽트**라고 합니다.
